# Codebase Report: Notification Setup Status
Generated: 2026-01-17

## Summary
The project currently has NO push notification setup. No expo-notifications package is installed, and there are no notification permissions configured beyond basic Android system permissions.

## Notification-Related Findings

### Installed Packages (package.json)
**NO notification packages found:**
- ❌ expo-notifications (not installed)
- ❌ expo-device (not installed - often used with notifications)
- ❌ Any third-party push notification services (Firebase, OneSignal, etc.)

**Expo packages present:**
- expo-haptics (v15.0.8) - for haptic feedback only, not notifications
- expo-constants (v18.0.13)
- expo-linking (v8.0.11)
- expo-router (v6.0.21)

### App Configuration (app.json)

**Current plugins:**
```json
"plugins": [
  "expo-router"
]
```

**Missing notification configuration:**
- No `expo-notifications` plugin
- No notification icons configured
- No notification channels defined (Android)
- No push notification entitlements (iOS)

### Android Permissions (AndroidManifest.xml)

**Current permissions:**
```xml
<uses-permission android:name="android.permission.INTERNET"/>
<uses-permission android:name="android.permission.READ_EXTERNAL_STORAGE"/>
<uses-permission android:name="android.permission.SYSTEM_ALERT_WINDOW"/>
<uses-permission android:name="android.permission.VIBRATE"/>
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/>
```

**Missing notification permissions:**
- ❌ `POST_NOTIFICATIONS` (required for Android 13+)
- ❌ No notification channels configured in AndroidManifest

### Code References

**Only 2 notification-related code references found:**

1. **lib/theme.ts:56** - Theme color only
   ```typescript
   notification: palette.clay,
   ```

2. **.opencode/plans/liquid-glass-refinement.md:129** - Haptic feedback (NOT push notifications)
   ```typescript
   Haptics.notificationAsync(Haptics.NotificationFeedbackType.Success);
   ```
   Note: This is just haptic feedback, not actual push notifications.

### iOS Configuration
- No Info.plist modifications for notifications
- No remote notification capabilities
- No notification service extension

## What Needs to Be Added

### 1. Install Dependencies
```bash
cd /home/gabrielolv/Documents/Projects/ter
npx expo install expo-notifications expo-device
```

### 2. Configure app.json
Add to plugins array:
```json
"plugins": [
  "expo-router",
  [
    "expo-notifications",
    {
      "icon": "./assets/images/notification-icon.png",
      "color": "#ffffff",
      "sounds": [],
      "mode": "production"
    }
  ]
]
```

### 3. Android Permissions
Will be auto-added by expo-notifications plugin:
- `POST_NOTIFICATIONS` (Android 13+)
- Notification channels

### 4. iOS Entitlements
Will be auto-configured by expo-notifications plugin:
- Remote notification capability
- Background modes

### 5. Implementation Code
Need to create:
- Notification permission request logic
- Notification handler setup
- Push token registration (if using remote notifications)
- Notification listener/response handlers

## Project Structure Context

**Expo Configuration:**
- Expo SDK: ~54.0.31
- React Native: 0.81.5
- React: 19.1.0
- Using Expo Router (v6.0.21)
- New Architecture enabled: `true`

**Package manager:** Based on project structure, likely using npm or yarn (no package-lock.json or yarn.lock visible in root listing)

**Platform support:**
- Android: ✓ (package: com.ter.app)
- iOS: ✓ (supports tablet)
- Web: ✓ (using Metro bundler)

## Recommendations

1. **Install expo-notifications** - Core package for local and push notifications
2. **Install expo-device** - Helps detect physical device vs simulator (needed for push notifications)
3. **Configure app.json** - Add notification plugin with Android icon and settings
4. **Request runtime permissions** - Android 13+ requires runtime permission for notifications
5. **Create notification service** - Centralized notification handling logic
6. **Test on physical device** - Push notifications don't work on simulators/emulators

## Key Files to Monitor
| File | Current State | After Setup |
|------|--------------|-------------|
| `/home/gabrielolv/Documents/Projects/ter/package.json` | No notification deps | Will have expo-notifications |
| `/home/gabrielolv/Documents/Projects/ter/app.json` | Only expo-router plugin | Will include expo-notifications plugin |
| `/home/gabrielolv/Documents/Projects/ter/android/app/src/main/AndroidManifest.xml` | Basic permissions only | Will have POST_NOTIFICATIONS |

## Next Steps

1. Install packages: `npx expo install expo-notifications expo-device`
2. Add notification icon asset (192x192 PNG with transparency)
3. Configure app.json plugins
4. Rebuild native projects: `npx expo prebuild --clean`
5. Create notification service/hooks
6. Test permission flow on physical devices
